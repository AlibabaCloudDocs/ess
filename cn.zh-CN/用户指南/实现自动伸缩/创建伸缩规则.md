# 创建伸缩规则 {#concept_nyt_kpw_rfb .concept}

创建伸缩组后，您还需要在伸缩组内创建伸缩规则，用于管理伸缩组的具体伸缩动作。本文介绍伸缩规则的创建步骤。

## 限制条件 {#section_x1c_ppw_rfb .section}

-   一个伸缩组内可以创建的伸缩规则数量有限，请参见[数量限制](cn.zh-CN/用户指南/使用须知/数量限制.md#)。
-   目标追踪规则只能由自动创建的关联报警任务执行。
-   如果执行伸缩规则后，伸缩组内服务中实例数将大于**伸缩最大实例数**或者小于**伸缩最小实例数**，弹性伸缩服务会自动调整扩张或收缩的ECS实例数量，保证弹性伸缩结果不会超过数量限制。例如：
    -   您拥有一个伸缩组asg-bp19ik2u5w7esjcu\*\*\*\*，伸缩最大实例数为3，伸缩规则add3为增加3台实例。如果当前服务中实例数为2，执行伸缩规则add3时，仅会增加1台ECS实例。
    -   您拥有一个伸缩组asg-bp19ik2u5w7esjcu\*\*\*\*，伸缩最小实例数为2，伸缩规则reduce2为减少2台实例。如果当前服务中实例数为3，执行伸缩规则reduce2时，仅会减少1台ECS实例。

## 操作步骤 {#section_ash_r1x_rfb .section}

1.  登录[弹性伸缩控制台](https://essnew.console.aliyun.com/)。
2.  在指定伸缩组**操作**列下，单击**管理**。
3.  前往伸缩规则页面，单击**创建伸缩规则**。
4.  配置伸缩规则的参数，然后单击**创建伸缩规则**。

    请根据需要选择伸缩规则类型，参数说明请参见[简单规则](#section_w87_i9q_o4h)和[目标追踪规则](#section_d0c_275_idu)。

    **说明：** 如果创建了目标追踪规则，会自动创建一项关联报警任务，只能由该报警任务执行目标追踪规则。

    ![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/40578/155709756246200_zh-CN.png)


## 简单规则 {#section_w87_i9q_o4h .section}

简单规则直接指定增加/减少实例的数量，或者将实例数量调整至指定值。简单规则的参数如下：

|名称|说明|
|--|--|
|**规则名称**|伸缩规则的名称。|
|**伸缩规则类型**|伸缩规则的类型，创建成功后不可修改。|
|**执行的操作**|视需要选择一种操作： -   调整至N台：执行伸缩规则后，伸缩组内实例的数量变为N台。最多能触发伸缩500台实例。
-   增加N台：执行伸缩规则后，伸缩组内实例的数量在当前基础上增加N台。增加的数量不可超过500。
-   增加N%：执行伸缩规则后，伸缩组内实例的数量在当前基础上增加N%。最多能触发伸缩500台实例。
-   减少N台：执行伸缩规则后，伸缩组内实例的数量在当前基础上减少N台。减少的数量不可超过500。
-   减少N%：执行伸缩规则后，伸缩组内实例的数量在当前基础上减少N%。最多能触发伸缩500台实例。

 |
|**冷却时间**|可选项，单位为秒。不填写则默认使用伸缩组的冷却时间，更多信息请参见[冷却时间](cn.zh-CN/用户指南/使用须知/冷却时间.md#)。|

## 目标追踪规则 {#section_d0c_275_idu .section}

目标追踪规则指定一项云监控指标的目标值，弹性伸缩会自动计算所需的实例数量并进行扩缩容，从而将云监控指标维持在目标值附近。目标追踪规则的参数如下：

|名称|说明|
|--|--|
|**规则名称**|伸缩规则的名称。|
|**伸缩规则类型**|伸缩规则的类型，创建成功后不可修改。|
|**指标类型**|视需要选择一项云监控指标： -   平均CPU使用率
-   内网入流量的平均值
-   内网出流量的平均值
-   公网入流量的平均值
-   公网出流量的平均值

 |
|**目标值**|云监控指标的目标值，目标追踪规则会将云监控指标值维持在目标值附近。|
|**实例预热时间**|单位为秒。在预热时间内，执行目标伸缩规则创建成功实例后，已启动的实例不会对云监控指标值产生影响，以免云监控指标值反复变化。|
|**禁用缩容**|启用后，目标伸缩规则不会减少伸缩组内实例的数量。|

