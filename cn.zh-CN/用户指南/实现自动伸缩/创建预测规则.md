# 创建预测规则 {#task_266223 .task}

预测规则基于机器学习，可以通过分析伸缩组的历史监控数据预测未来监控指标值，并支持自动创建定时任务，智能设置伸缩组边界值。本文介绍如何创建预测规则。

在创建伸缩组时，您可以设置伸缩组边界值，即伸缩最大实例数和伸缩最小实例数。但如果您并不了解业务运行情况，设置的伸缩组边界值可能与实际需求存在偏差。伸缩最小实例数过高可能会导致购入过多计算资源，伸缩最大实例数过低又可能导致计算资源不足，影响服务稳定。

预测规则会获取至少24小时的历史监控数据，利用机器学习能力预测未来48小时的监控指标值，然后计算出伸缩组每小时需要的实例数，即预测值。预测结果每天更新一次，并为未来48小时创建48个预测任务。预测任务执行后会修改伸缩组边界值，而非组内实例数量。

预测规则可以与目标追踪规则和简单规则同时使用。当与目标追踪规则同时使用时，推荐设置相同的指标类型和目标值，防止因为指标差异造成伸缩组实例数抖动。

1.  登录[弹性伸缩控制台](https://essnew.console.aliyun.com/)。
2.  在指定伸缩组**操作**列下，单击**管理**。
3.  前往伸缩规则页面，单击**创建伸缩规则**。
4.  设置伸缩规则参数，然后单击**创建伸缩规则**。 一个伸缩组内只能创建一条预测规则。预测规则的参数如下：

    |参数|说明|
    |--|--|
    |**规则名称**|伸缩规则的名称。|
    |**伸缩规则类型**|伸缩规则的类型，选择**预测规则**。|
    |**是否配合已有的目标追踪规则**|和**选择规则**结合使用。|
    |**选择规则**|勾选**是否配合已有的目标追踪规则**后出现，您可以继续选择一条目标追踪规则，自动沿用目标追踪规则的**指标类型**和**目标值**。|
    |**指标类型**|视需要选择一项云监控指标：     -   平均CPU使用率（%）
    -   内网入流量的平均值（KB/Min）
    -   内网出流量的平均值（KB/Min）
 |
    |**目标值**|所选云监控指标的目标值，预测规则将综合目标值等因素计算出合适的预测值。 如果您修改了目标值，伸缩组会清空现存的预测任务，并在一小时内创建新的预测任务。

 |
    |**预测模式**|视需要选择预测模式：     -   **预测并伸缩**：产生预测结果并创建预测任务。
    -   **只预测不伸缩**：产生预测结果，但不会创建预测任务。
 建议您先选择**只预测不伸缩**，如果预测效果符合预期，再修改为**预测并伸缩**。您可以在伸缩规则详情中[查看预测规则效果](cn.zh-CN/.md#)。

 |
    |**初始最大值**|伸缩组实例数上限，和**最大值处理方式**结合使用。 默认值为当前的**伸缩最大实例数**。

 |
    |**最大值处理方式**|当预测值大于**初始最大值**时，预测值的处理方式分为以下三种：     -   **预测值会覆盖初始最大值**：预测值大于初始最大值时， 预测任务的最大值采用预测值。
    -   **初始最大值会覆盖预测值**：预测值大于初始最大值时，预测任务的最大值采用初始最大值。
    -   **预测值会附加一定比例**：和**增加比例**结合使用。
 默认值为**初始最大值会覆盖预测值**。

 |
    |**增加比例**|**最大值处理方式**为**预测值会附加一定比例**时生效，预测值会按照该比例增加，当增加后的值大于初始最大值时，会采用增加后的值。 默认值为0，最大值为100。

 |
    |**预启动时间（分钟）**|预测规则自动创建的预测任务默认均在整点执行，您可以设置预启动时间提前执行预测任务，预先准备资源。 默认值为0，最大值为60。

 |


