# AttachVServerGroups {#concept_ox3_qgz_zfb .concept}

You can call the AttachVServerGroups operation to add one or more VServer groups to an SLB instance.

## Restrictions {#section_hdj_zgz_zfb .section}

Due to the [restrictions](../../../../../reseller.en-US/Limits/Limits.md#) of SLB, you must make sure that the following prerequisites are met before you add a VServer group to the scaling group:

-   The SLB instance and the scaling group must be under the same account.
-   The SLB instance and the scaling group must be in the same region.
-   The SLB instance must be in the **Running** status.
-   The SLB instance must be configured with at least one listener with health check enabled.
-   The SLB instance and the scaling group must be in the same VPC network if the network type of both of them is VPC.
-   If the network type of the scaling group is VPC, the network type of the SLB instance is classic, and the backend server group of the SLB instance contains a VPC-connected instance, then the VPC-connected instance and the scaling group must be in the same VPC network.
-   The VServer group that you want to add to the scaling group must have been associated with the SLB instance.
-   Currently, you can add up to five VServer groups to a scaling group.

    **Note:** To add a VServer group to a scaling group, you must specify the SLB instance ID \(LoadBalancerId\), the VServer group ID \(VServerGroupId\), and the port number of the VServer group \(Port\). If you have added the same VServer group to a scaling group using different port numbers, Auto Scaling considers that multiple VServer groups are added to the scaling group. If multiple VServer groups with the same group ID and port number are specified in the request parameters, only the first VServer group is used. The other VServer groups are ignored.


## Request parameters {#section_xqd_fhz_zfb .section}

|Name|Type|Required|Description|
|----|----|--------|-----------|
|Action|String|Yes|The operation that you want to perform. Set the value to AttachVServerGroups.|
|RegionId|String|Yes|The ID of the region where the scaling group is created, for example, cn-hangzhou or cn-shanghai. For more information, see [Regions and zones](../../../../../reseller.en-US/General Reference/Regions and zones.md#).|
|ScalingGroupId|String|Yes|The ID of the scaling group.|
|VServerGroup.N.LoadBalancerId|String|Yes|The ID of the SLB instance that the VServer group is associated with. N represents the SLB instance number. Valid values: 1 to 5.|
|VServerGroup.N.VServerGroupAttribute.M.VServerGroupId|String|Yes|The ID of the VServer group. N represents the SLB instance number. Valid values: 1 to 5. M represents the VServer group number that is associated with the SLB instance. Valid values: 1 to 5.|
|VServerGroup.N.VServerGroupAttribute.M.Port|Integer|Yes|The port number that is used by Auto Scaling to add the ECS instances to the VServer group. Valid values: 1 to 65535.N represents the SLB instance number. Valid values: 1 to 5. M represents the VServer group number that is associated with the SLB instance. Valid values: 1 to 5.

|
|VServerGroup.N.VServerGroupAttribute.M.Weight|Integer|No|The weight set for the ECS instances that are added to the VServer group. Value range: 0 to 100.Default value: 50.

N represents the SLB instance number. Valid values: 1 to 5. M represents the VServer group number that is associated with the SLB instance. Valid values: 1 to 5.

|
|ForceAttach|Boolean|No|Indicates whether to add the ECS instances in the scaling group to the newly added VServer group.-   true: Add the ECS instances to the VServer group.
-   false: Do not add the ECS instances to the VServer group.

Default value: false.

|

## Response parameters {#section_j1y_f3z_zfb .section}

|Name|Type|Description|
|----|----|-----------|
|RequestId|String|The GUID generated by Alibaba Cloud for the request.|

## Examples {#section_lm4_j3z_zfb .section}

**Sample requests**

```
http://ess.aliyuncs.com/?Action=AttachVServerGroups
&ScalingGroupId=asg-xxxxxxxxxxx
&RegionId=cn-hangzhou
& Vservergroup. 1. LoadBalancerId=lb-xxxxxxx
&VServerGroup. 1. VServerGroupAttribute. 1. VServerGroupId=rsp-xxxxx
&VServerGroup. 1. VServerGroupAttribute. 1. Port=22
&VServerGroup. 1. VServerGroupAttribute. 1. Weight=100
&<Common request parameters>
```

**Sample responses**

XML format

```
<AttachVServerGroupsResponse>
    <RequestId>04F0F334-1335-436C-A1D7-6C044FE73368</RequestId>
</AttachVServerGroupsResponse>
```

JSON format

```
{
   "requestId": "04F0F334-1335-436C-A1D7-6C044FE73368"
}
```

## Error codes {#section_jh2_v3z_zfb .section}

|Error code|Error message|HTTP status code|Description|
|----------|-------------|----------------|-----------|
|Forbidden.Unauthorized|A required authorization for the specified action is not supplied.|403|The error message returned when Auto Scaling is not authorized to call the specified operation.|
|InvalidScalingGroupId.NotFound|The specified scaling group does not exist.|404|The error message returned when the specified scaling group does not exist under your account.|
|InvalidLoadBalancerId.NotFound|The load balancer "%s" does not exist.|404|The error message returned when the specified SLB instance does not exist under your account.|
|InvalidLoadBalancerId.RegionMismatch|The load balancer "%s" and the specified scaling group are not in the same Region.|400|The error message returned when the SLB instance and the scaling group are not in the same region.|
|IncorrectLoadBalancerStatus|The current status of the load balancer "%s" does not support this action.|400|The error message returned when the specified operation is not supported by the SLB instance.|
|IncorrectLoadBalancerHealthCheck|The current health check type of the load balancer "%s" does not support this action.|400|The error message returned when health check is not enabled for the specified SLB instance.|
|InvalidLoadBalancerId.VPCMismatch|The specified virtual switch and the instance in the load balancer "%s" are not in the same VPC.|400|The error message returned when the SLB instance and the scaling group are not in the same VPC network.|
|InvalidVServerGroupId.ForLoadBalancer|Invalid VServerGroupId For LoadBalancer "%s".|400|The error message returned when the VServer group that is specified by the VServerGroupId parameter has not been associated with the specified SLB instance.|
|QuotaExceeded.VServerGroup|VServerGroup quota exceeded in the specified scaling group.|400|The error message returned when the number of VServer groups that you can add to the scaling group exceeds the upper limit.|

