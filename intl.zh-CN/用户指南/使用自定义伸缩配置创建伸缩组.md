# 使用自定义伸缩配置创建伸缩组 {#concept_25882_zh .concept}

在使用弹性伸缩调整弹性计算资源大小之前，您首先需要创建一个伸缩组。

伸缩组是具有相同应用场景的ECS实例的集合。您可以在伸缩组内定义最大实例数、最小实例数和冷却时间等属性，还可以为这些ECS实例关联负载均衡和数据库实例，便于进行综合管理。

**说明：** 一个账号能创建的伸缩组数量有上限。更多信息，请参阅[使用限制](intl.zh-CN/用户指南/使用须知/数量限制.md#)。

如果您希望使用现有的实例启动模板，请参阅[使用实例启动模板创建伸缩组](intl.zh-CN/用户指南/使用实例启动模板创建伸缩组.md#)。

## 操作步骤 { .section}

1.  登录[弹性伸缩控制台](https://essnew.console.aliyun.com/)。
2.  在伸缩组管理页面中，单击**创建伸缩组**。
3.  设置伸缩组属性。
    1.  设置**伸缩组名称**。
    2.  设置**伸缩最大实例数（台）**。

        **说明：** 超过上限时，弹性伸缩会自动移出ECS实例，使得伸缩组的当前ECS实例数等于上限。

    3.  设置**伸缩最小实例数（台）**。

        **说明：** 低于下限时，弹性伸缩会自动添加ECS实例，使得伸缩组 的当前ECS实例数等于下限。

    4.  设置**默认冷却时间（秒）**。

        **说明：** 伸缩组发生伸缩活动后的默认冷却时间。更多信息，请参阅[冷却时间](intl.zh-CN/用户指南/使用须知/冷却时间.md#)。

    5.  设置**移出策略**。

        **说明：** 伸缩组内ECS实例数超过上限时，移出ECS实例的策略。更多信息，请参阅[移出策略](intl.zh-CN/用户指南/实现自动伸缩/移出策略.md#)。

    6.  设置**组内实例配置信息来源**，选择**自定义伸缩配置**。
    7.  设置**网络类型**，如果您选择**专有网络**，还需要指定以下信息：

        1.  指定**专有网络**和**虚拟交换机**。
        2.  指定**多可用区扩缩容策略**，具体的策略说明，请参阅[多可用区扩缩容策略](#)。
        3.  指定**回收模式**，具体的模式说明，请参阅[回收模式](#)。
        ![配置伸缩组网络类型](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/40577/154996087221653_zh-CN.png)

    8.  （可选）设置**负载均衡**。

        **说明：** 一个伸缩组最多同时关联5个负载均衡实例。伸缩组还支持选择一个负载均衡实例下的[默认服务器组](../../../../../intl.zh-CN/用户指南/后端服务器/后端服务器概述.md#section_fzb_g5n_n2b)和[虚拟服务器组](../../../../../intl.zh-CN/用户指南/后端服务器/后端服务器概述.md#section_xqs_h2v_vdb)，一个伸缩组最多支持同时选择5个虚拟服务器组。更多信息，请参阅[在弹性伸缩中使用负载均衡服务](intl.zh-CN/用户指南/在弹性伸缩中使用负载均衡服务.md#)。

        ![伸缩组关联负载均衡实例](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/40577/154996087221654_zh-CN.png)

    9.  （可选）设置**数据库**，目前支持RDS。

        **说明：** 只能添加和伸缩组位于同一地域的RDS实例，伸缩组弹性扩张出ECS实例后，会自动将ECS实例的内网IP添加到RDS实例的访问白名单，允许两者内网通信。

4.  单击**提交**。
5.  在伸缩组创建成功对话框中，单击**创建伸缩配置**，继续创建用于弹性扩张的ECS实例模板。

    ![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/40577/154996087221655_zh-CN.png)

    **说明：** 有关伸缩配置，请参阅[创建伸缩配置](intl.zh-CN/用户指南/管理伸缩组的实例模板配置/创建伸缩配置.md#)。

6.  确定伸缩配置后，在启用伸缩组对话框中，单击**确定**。

## 多可用区扩缩容策略 {#hxfive .section}

|策略名称|说明|
|:---|:-|
|优先级策略|根据您定义的虚拟交换机扩缩容。当优先级较高的虚拟交换机所在可用区无法创建ECS实例时，自动使用下一优先级的虚拟交换机创建ECS实例。|
|均衡分布策略|在伸缩组指定的多可用区（即指定多个专有网络交换机）之间均匀分配ECS实例。如果由于库存不足等原因可用区之间变得不平衡，您可以进行再均衡操作来平衡资源的可用区分布。**说明：** 当您设置了多个专有网络交换机时，该策略才能生效。

|
|成本优化策略|伸缩组网络类型为专有网络：-   当伸缩配置选择抢占式实例时，可以通过成本优化策略来保证业务的稳定性。
-   当伸缩配置选择多实例规格时，可以通过成本优化策略来降低ECS实例使用成本。成本优化策略按vCPU单价从低到高进行尝试创建。
-   当伸缩配置设置了抢占式计费方式的多实例规格时，优先创建对应抢占式计费实例。
-   当抢占式计费实例规格由于库存等原因都无法创建时，自动尝试以按量付费的方式创建。

|

## 回收模式 {#section_rmq_bpw_rfb .section}

|模式名称|说明|
|----|--|
|释放模式|在弹性收缩时，根据定时或报警任务自动释放合适数量的ECS实例。在弹性扩张时，根据定时或报警任务创建新的ECS实例加入伸缩组。

|
|停机回收模式|停机回收模式可以提高扩缩容的时间效率。在此模式下：-   当弹性收缩时，自动创建的ECS实例将进入停止状态，此状态下实例的CPU和内存不收费，云盘（包括系统盘、数据盘）、弹性公网IP和带宽仍旧收费，公网IP将被回收，待启动时重新分配（弹性公网IP仍旧保留），这些停机的实例形成了停机实例池。
-   当弹性扩张时，停机实例池内的实例会优先变为运行状态，如果停机实例池数量不足则会重新启动实例。

**说明：** 

-   只有VPC实例的伸缩组才能开启此模式。
-   所有本地盘实例（包括但不限于d1、d1ne、ga1、gn5、i1和i2）不支持此模式。
-   扩容时，停机实例池的实例不能保证成功进入运行状态。如果由于库存等其他原因，停止的实例不能正常进入运行状态，该实例会被释放，并重新创建实例，保证伸缩规则的执行结果达到预期。
-   伸缩组设置为停机回收模式后，暂不支持修改。

|

