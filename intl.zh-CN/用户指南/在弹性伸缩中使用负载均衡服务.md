# 在弹性伸缩中使用负载均衡服务 {#concept_wsy_kts_ggb .concept}

伸缩组支持关联负载均衡实例，通过负载均衡实例将访问流量分发到伸缩组内的多个ECS实例，有效增强伸缩组的服务能力。

## 负载均衡服务简介 {#section_fzl_yts_ggb .section}

负载均衡服务通过设置虚拟服务地址，将添加的同一地域的多个ECS实例虚拟成一个高性能、高可用的应用服务池。简单来说，负载均衡服务通过组合负载均衡实例 、监听和后端服务器，提供流量分发控制服务。更多信息，请参阅[什么是负载均衡](../../../../../intl.zh-CN/产品简介/什么是负载均衡.md#)。

## 前提条件 {#section_f2z_hkz_ggb .section}

在为伸缩组添加负载均衡实例前，请确保：

-   您持有一个或多个**运行中**的负载均衡实例。否则，请先[创建负载均衡实例](../../../../../intl.zh-CN/用户指南/负载均衡实例/创建负载均衡实例.md#)。
-   负载均衡实例和伸缩组必须位于同一地域。
-   如果负载均衡实例和伸缩组的网络类型均为专有网络，则必须位于同一专有网络。
-   当负载均衡实例的网络类型为经典网络，伸缩组的网络类型为专有网络时，如果负载均衡实例的后端服务器组中包含专有网络ECS实例，该ECS实例必须与伸缩组位于同一专有网络。
-   负载均衡实例配置至少一个监听。否则，请参阅[监听介绍](../../../../../intl.zh-CN/用户指南/监听/监听介绍.md#)添加合适类型的监听。
-   负载均衡实例必须开启健康检查。否则，请参阅[配置健康检查](../../../../../intl.zh-CN/用户指南/健康检查/配置健康检查.md#)开启健康检查。

## 通过控制台管理负载均衡实例 {#section_f1g_vvs_ggb .section}

**说明：** 本步骤重点介绍负载均衡实例相关的控制台操作，如需了解其它配置，请参阅[使用自定义伸缩配置创建伸缩组](intl.zh-CN/用户指南/使用自定义伸缩配置创建伸缩组.md#)或者[使用实例启动模板创建伸缩组](intl.zh-CN/用户指南/使用实例启动模板创建伸缩组.md#)。

1.  登录[弹性伸缩控制台](https://essnew.console.aliyun.com/)。
2.  在伸缩组管理页面中，选择一种方式进入添加负载均衡实例的页面：
    -   创建伸缩组时，单击**创建伸缩组**。
    -   修改伸缩祖时，单击待修改伸缩组**操作**列下的**修改**。
3.  配置**网络类型**。

    **说明：** 伸缩组的网络类型在创建伸缩组时指定，不支持修改。

4.  关联负载均衡实例。

    **说明：** 一个伸缩组最多同时关联5个负载均衡实例。如果没有加载出可选负载均衡实例，可能是您的负载均衡实例未满足[关联条件](#section_f2z_hkz_ggb)，请单击**管理我的负载均衡**前往负载均衡控制台查看并更新配置。

5.  选择用于承载伸缩组中ECS实例的后端服务器组。

    **说明：** 伸缩组支持选择一个负载均衡实例下的[默认服务器组](../../../../../intl.zh-CN/用户指南/后端服务器/后端服务器概述.md#section_fzb_g5n_n2b)和[虚拟服务器组](../../../../../intl.zh-CN/用户指南/后端服务器/后端服务器概述.md#section_xqs_h2v_vdb)，一个伸缩组最多支持同时选择5个虚拟服务器组。

    ![伸缩组关联负载均衡实例](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/83706/155004824035588_zh-CN.png)

6.  根据需要配置其余选项。

## 通过API管理负载均衡实例 {#section_z15_4b3_3gb .section}

使用[CreateScalingGroup](../../../../../intl.zh-CN/API 参考/伸缩组/CreateScalingGroup.md#)创建伸缩组时，您可以通过LoadBalancerIds关联相应的负载均衡实例，并通过VServerGroup控制虚拟服务器组的属性。

修改伸缩组时，您可以通过AttachLoadBalancers和DetachLoadBalancers控制关联负载均衡实例的动作，然后通过AttachVServerGroups和DetachVServerGroups控制选择虚拟服务器组的动作。

## 负载均衡效果 {#section_k5w_hws_ggb .section}

伸缩组关联负载均衡实例后，无论是伸缩组自动创建ECS实例，还是您向伸缩组手动添加ECS实例，ECS实例都会自动加入到负载均衡实例的后端服务器组。负载均衡实例会根据流量分发、健康检查等策略灵活使用ECS实例资源，在资源弹性的基础上大大提高资源可用性。

**说明：** 这些ECS实例的权重默认为50，您可以根据需要在对应负载均衡实例中调整权重。

